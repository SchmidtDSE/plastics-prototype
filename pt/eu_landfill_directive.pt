# Determine target in percent
var limitPercentGoal = in.euLandfillDirective / 100;
var limitPercent = 1;
change limitPercent by -1 * (1 - limitPercentGoal) over 1999 to 2035;

# Determine target in MT
var totalWaste = (
  out.eu30.eolLandfillMT +
  out.eu30.eolIncinerationMT +
  out.eu30.eolMismanagedMT +
  out.eu30.eolRecyclingMT
);
var limitLandfill = totalWaste * limitPercent;

# Determine change required
var originalLandfill = out.eu30.eolLandfillMT;
var requiredReduction = originalLandfill - limitLandfill;
limit requiredReduction to [0,];

# Apply change to landfill
out.eu30.eolLandfillMT = out.eu30.eolLandfillMT - requiredReduction;

# Offset in other fates
distribute requiredReduction across [
  out.eu30.eolIncinerationMT,
  out.eu30.eolMismanagedMT,
  out.eu30.eolRecyclingMT
] proportionally;
