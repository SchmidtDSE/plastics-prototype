name: Build
on: [push]

jobs:
  check_language:
    environment: deploy
    runs-on: ubuntu-latest
    name: Check language
    steps:
      - name: Checkout
        uses: actions/checkout@v2.3.4
      - uses: actions/setup-java@v2
        with:
          distribution: 'zulu'
          java-version: '11'
      - name: Build
        shell: bash
        run: |
          chmod +x "./make.sh"
          chmod +x "./npm_install.sh"
          "./npm_install.sh"
          "./make.sh"
      - name: Look for ANTLR JS
        uses: thebinaryfelix/check-file-existence-action@1.0.0
        id: check_files
        with:
          files: 'js/plastics_lang.js'
      - name: Assert ANTLR JS
        if: steps.check_files.outputs.exists == 'false'
        run: exit 1